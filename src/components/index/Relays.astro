---
import { ExternalLink } from "@lucide/astro";
import CopyButton from "./CopyButton";
import JoinCommunity from "./JoinCommunity";

const RELAY_URL = "wss://relay.nostrzh.org/";
const jumbleUrl = `https://jumble.social?r=${encodeURIComponent(RELAY_URL)}`;
---

<section id="relay" class="py-24 relative overflow-hidden">
  <div class="absolute inset-0 bg-slate-50 dark:bg-slate-800/50"></div>
  <div
    class="absolute inset-0 bg-[radial-gradient(ellipse_at_top,var(--tw-gradient-stops))] from-purple-100/50 via-transparent to-transparent dark:from-purple-900/20"
  >
  </div>

  <div class="max-w-4xl mx-auto px-6 relative">
    <div class="text-center mb-12">
      <h2
        class="text-3xl md:text-4xl font-bold text-slate-800 dark:text-white mb-4"
      >
        加入社区
      </h2>
      <p class="text-lg text-slate-600 dark:text-slate-300 max-w-2xl mx-auto">
        连接到我们的 Relay，加入中文 Nostr 社区
      </p>
    </div>

    <div
      class="p-8 rounded-2xl bg-white dark:bg-slate-900 shadow-lg border border-slate-200 dark:border-slate-700"
    >
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-xl font-semibold text-slate-800 dark:text-white">
          Nostr 中文社区 Relay
        </h3>
        <span
          class="px-3 py-1 text-xs font-medium bg-purple-100 dark:bg-purple-900/50 text-purple-600 dark:text-purple-300 rounded-full"
        >
          邀请制
        </span>
      </div>

      <p class="text-slate-600 dark:text-slate-400 mb-6">
        邀请制中文社区 Relay，聚集 Nostr
        上的中文用户，打造高质量的中文社交空间。
      </p>

      <div
        class="flex items-center gap-3 p-4 bg-slate-50 dark:bg-slate-800 rounded-lg mb-6"
      >
        <code
          class="flex-1 text-sm text-purple-600 dark:text-purple-400 font-mono"
        >
          {RELAY_URL}
        </code>
        <a
          href={jumbleUrl}
          target="_blank"
          rel="noopener noreferrer"
          class="px-4 py-2 flex items-center gap-2 text-sm shrink-0 cursor-pointer bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 rounded-lg transition-colors"
          >浏览 <ExternalLink class="size-4" /></a
        >
        <CopyButton text={RELAY_URL} client:visible />
      </div>

      <JoinCommunity client:visible />
    </div>
  </div>
</section>
